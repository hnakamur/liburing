<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>liburing: queue.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">liburing
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">queue.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;sys/mman.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;<a class="el" href="compat_8h_source.html">liburing/compat.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="io__uring_8h_source.html">liburing/io_uring.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="liburing_8h_source.html">liburing.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="barrier_8h_source.html">liburing/barrier.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="syscall_8h_source.html">syscall.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for queue.c:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c__incl.png" border="0" usemap="#queue_8c" alt=""/></div>
<map name="queue_8c" id="queue_8c">
<area shape="rect" id="node9" href="compat_8h.html" title="A header file generated by the configure script. " alt="" coords="457,155,578,181"/>
<area shape="rect" id="node12" href="io__uring_8h.html" title="liburing/io_uring.h" alt="" coords="653,155,776,181"/>
<area shape="rect" id="node15" href="liburing_8h.html" title="API simpler to use and understand for io_uring. " alt="" coords="812,80,887,107"/>
<area shape="rect" id="node20" href="barrier_8h.html" title="liburing/barrier.h" alt="" coords="1195,155,1309,181"/>
<area shape="rect" id="node21" href="syscall_8h.html" title="syscall.h" alt="" coords="961,80,1036,107"/>
</map>
</div>
</div>
<p><a href="queue_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9b1cf0da6d89c80dcb81d40562f0d594"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a9b1cf0da6d89c80dcb81d40562f0d594">__io_uring_get_sqe</a>(sq,  __head)</td></tr>
<tr class="separator:a9b1cf0da6d89c80dcb81d40562f0d594"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad7c5570a084b8d796dac5373d3942d39"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#ad7c5570a084b8d796dac5373d3942d39">sq_ring_needs_enter</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>, unsigned submitted, unsigned *flags)</td></tr>
<tr class="separator:ad7c5570a084b8d796dac5373d3942d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50b9adbc09a9f6ce8d7a1f2e2f66f274"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a50b9adbc09a9f6ce8d7a1f2e2f66f274">__io_uring_get_cqe</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>, struct <a class="el" href="structio__uring__cqe.html">io_uring_cqe</a> **cqe_ptr, unsigned submit, unsigned <a class="el" href="submit-reuse_8c.html#ad9437a30a25dd46080cc9d34a5164c12">wait_nr</a>, sigset_t *sigmask)</td></tr>
<tr class="memdesc:a50b9adbc09a9f6ce8d7a1f2e2f66f274"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper for the peek/wait single cqe functions.  <a href="#a50b9adbc09a9f6ce8d7a1f2e2f66f274">More...</a><br /></td></tr>
<tr class="separator:a50b9adbc09a9f6ce8d7a1f2e2f66f274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43ad5af25e75c15bbd41ecf86c06cc5b"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a43ad5af25e75c15bbd41ecf86c06cc5b">io_uring_peek_batch_cqe</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>, struct <a class="el" href="structio__uring__cqe.html">io_uring_cqe</a> **cqes, unsigned count)</td></tr>
<tr class="memdesc:a43ad5af25e75c15bbd41ecf86c06cc5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill in an array of IO completions up to count, if any are available.  <a href="#a43ad5af25e75c15bbd41ecf86c06cc5b">More...</a><br /></td></tr>
<tr class="separator:a43ad5af25e75c15bbd41ecf86c06cc5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a069c30bccb6bbd88e7f9d83213557eff"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a069c30bccb6bbd88e7f9d83213557eff">__io_uring_flush_sq</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>)</td></tr>
<tr class="separator:a069c30bccb6bbd88e7f9d83213557eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7989e64f69bc3e9d85617b80ef527430"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a7989e64f69bc3e9d85617b80ef527430">io_uring_wait_cqes</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>, struct <a class="el" href="structio__uring__cqe.html">io_uring_cqe</a> **cqe_ptr, unsigned <a class="el" href="submit-reuse_8c.html#ad9437a30a25dd46080cc9d34a5164c12">wait_nr</a>, struct __kernel_timespec *ts, sigset_t *sigmask)</td></tr>
<tr class="memdesc:a7989e64f69bc3e9d85617b80ef527430"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an IO completion, waiting for it if necessary.  <a href="#a7989e64f69bc3e9d85617b80ef527430">More...</a><br /></td></tr>
<tr class="separator:a7989e64f69bc3e9d85617b80ef527430"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea36874e3fdd54543cec58b68399920c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#aea36874e3fdd54543cec58b68399920c">io_uring_wait_cqe_timeout</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>, struct <a class="el" href="structio__uring__cqe.html">io_uring_cqe</a> **cqe_ptr, struct __kernel_timespec *ts)</td></tr>
<tr class="memdesc:aea36874e3fdd54543cec58b68399920c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an IO completion, waiting for it if necessary.  <a href="#aea36874e3fdd54543cec58b68399920c">More...</a><br /></td></tr>
<tr class="separator:aea36874e3fdd54543cec58b68399920c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31fd755459cf7bdd8357cef6183868a0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a31fd755459cf7bdd8357cef6183868a0">__io_uring_submit</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>, unsigned submitted, unsigned <a class="el" href="submit-reuse_8c.html#ad9437a30a25dd46080cc9d34a5164c12">wait_nr</a>)</td></tr>
<tr class="separator:a31fd755459cf7bdd8357cef6183868a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6657907c30a92b2d15072d4baa9fe1b6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a6657907c30a92b2d15072d4baa9fe1b6">__io_uring_submit_and_wait</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>, unsigned <a class="el" href="submit-reuse_8c.html#ad9437a30a25dd46080cc9d34a5164c12">wait_nr</a>)</td></tr>
<tr class="separator:a6657907c30a92b2d15072d4baa9fe1b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a556bbd9cfb46506458b32573a5326ad8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a556bbd9cfb46506458b32573a5326ad8">io_uring_submit</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>)</td></tr>
<tr class="memdesc:a556bbd9cfb46506458b32573a5326ad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submit sqes acquired from <a class="el" href="liburing_8h.html#aa2ce0e4b691ae0faf188a38974dd203c" title="Return an sqe to fill. ">io_uring_get_sqe()</a> to the kernel.  <a href="#a556bbd9cfb46506458b32573a5326ad8">More...</a><br /></td></tr>
<tr class="separator:a556bbd9cfb46506458b32573a5326ad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22baeb2e0a3d42ab19325f45d34aa840"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a22baeb2e0a3d42ab19325f45d34aa840">io_uring_submit_and_wait</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>, unsigned <a class="el" href="submit-reuse_8c.html#ad9437a30a25dd46080cc9d34a5164c12">wait_nr</a>)</td></tr>
<tr class="memdesc:a22baeb2e0a3d42ab19325f45d34aa840"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submit sqes acquired from <a class="el" href="liburing_8h.html#aa2ce0e4b691ae0faf188a38974dd203c" title="Return an sqe to fill. ">io_uring_get_sqe()</a> to the kernel and wait for events.  <a href="#a22baeb2e0a3d42ab19325f45d34aa840">More...</a><br /></td></tr>
<tr class="separator:a22baeb2e0a3d42ab19325f45d34aa840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ce0e4b691ae0faf188a38974dd203c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structio__uring__sqe.html">io_uring_sqe</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#aa2ce0e4b691ae0faf188a38974dd203c">io_uring_get_sqe</a> (struct <a class="el" href="structio__uring.html">io_uring</a> *<a class="el" href="submit-reuse_8c.html#aaaf11a4ee6850136ea838493ccd3d56f">ring</a>)</td></tr>
<tr class="memdesc:aa2ce0e4b691ae0faf188a38974dd203c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an sqe to fill.  <a href="#aa2ce0e4b691ae0faf188a38974dd203c">More...</a><br /></td></tr>
<tr class="separator:aa2ce0e4b691ae0faf188a38974dd203c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a9b1cf0da6d89c80dcb81d40562f0d594"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b1cf0da6d89c80dcb81d40562f0d594">&#9670;&nbsp;</a></span>__io_uring_get_sqe</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __io_uring_get_sqe</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sq, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__head&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">({              \</div><div class="line">    unsigned __next = (sq)-&gt;sqe_tail + 1;               \</div><div class="line">    struct <a class="code" href="structio__uring__sqe.html">io_uring_sqe</a> *__sqe = NULL;              \</div><div class="line">                                    \</div><div class="line">    if (__next - __head &lt;= *(sq)-&gt;kring_entries) {          \</div><div class="line">        __sqe = &amp;(sq)-&gt;sqes[(sq)-&gt;sqe_tail &amp; *(sq)-&gt;kring_mask];\</div><div class="line">        (sq)-&gt;sqe_tail = __next;                \</div><div class="line">    }                               \</div><div class="line">    __sqe;                              \</div><div class="line">})</div><div class="ttc" id="structio__uring__sqe_html"><div class="ttname"><a href="structio__uring__sqe.html">io_uring_sqe</a></div><div class="ttdef"><b>Definition:</b> <a href="io__uring_8h_source.html#l00017">io_uring.h:17</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00240">240</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a069c30bccb6bbd88e7f9d83213557eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a069c30bccb6bbd88e7f9d83213557eff">&#9670;&nbsp;</a></span>__io_uring_flush_sq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __io_uring_flush_sq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00106">106</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="a50b9adbc09a9f6ce8d7a1f2e2f66f274"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50b9adbc09a9f6ce8d7a1f2e2f66f274">&#9670;&nbsp;</a></span>__io_uring_get_cqe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __io_uring_get_cqe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structio__uring__cqe.html">io_uring_cqe</a> **&#160;</td>
          <td class="paramname"><em>cqe_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>submit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>wait_nr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sigset_t *&#160;</td>
          <td class="paramname"><em>sigmask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper for the peek/wait single cqe functions. </p>
<p>Exported because of that, but probably shouldn't be used directly in an application. </p>

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00035">35</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="a31fd755459cf7bdd8357cef6183868a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31fd755459cf7bdd8357cef6183868a0">&#9670;&nbsp;</a></span>__io_uring_submit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __io_uring_submit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>submitted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>wait_nr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00194">194</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="a6657907c30a92b2d15072d4baa9fe1b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6657907c30a92b2d15072d4baa9fe1b6">&#9670;&nbsp;</a></span>__io_uring_submit_and_wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __io_uring_submit_and_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>wait_nr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00215">215</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="aa2ce0e4b691ae0faf188a38974dd203c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ce0e4b691ae0faf188a38974dd203c">&#9670;&nbsp;</a></span>io_uring_get_sqe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structio__uring__sqe.html">io_uring_sqe</a>* io_uring_get_sqe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return an sqe to fill. </p>
<p>Application must later call <a class="el" href="liburing_8h.html#a556bbd9cfb46506458b32573a5326ad8" title="Submit sqes acquired from io_uring_get_sqe() to the kernel. ">io_uring_submit()</a> when it's ready to tell the kernel about it. The caller may call this function multiple times before calling <a class="el" href="liburing_8h.html#a556bbd9cfb46506458b32573a5326ad8" title="Submit sqes acquired from io_uring_get_sqe() to the kernel. ">io_uring_submit()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ring</td><td>an <a class="el" href="structio__uring.html">io_uring</a> queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vacant sqe, or NULL if we're full. </dd></dl>

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00258">258</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="a43ad5af25e75c15bbd41ecf86c06cc5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43ad5af25e75c15bbd41ecf86c06cc5b">&#9670;&nbsp;</a></span>io_uring_peek_batch_cqe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned io_uring_peek_batch_cqe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structio__uring__cqe.html">io_uring_cqe</a> **&#160;</td>
          <td class="paramname"><em>cqes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill in an array of IO completions up to count, if any are available. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ring</td><td><a class="el" href="structio__uring.html">io_uring</a> queue. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cqes</td><td>completion queue entries. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>fill entires up to this count. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the amount of IO completions filled. </dd></dl>

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00079">79</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="a556bbd9cfb46506458b32573a5326ad8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a556bbd9cfb46506458b32573a5326ad8">&#9670;&nbsp;</a></span>io_uring_submit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int io_uring_submit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Submit sqes acquired from <a class="el" href="liburing_8h.html#aa2ce0e4b691ae0faf188a38974dd203c" title="Return an sqe to fill. ">io_uring_get_sqe()</a> to the kernel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ring</td><td>an <a class="el" href="structio__uring.html">io_uring</a> queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of sqes submitted on success, -errno on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00225">225</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="a22baeb2e0a3d42ab19325f45d34aa840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22baeb2e0a3d42ab19325f45d34aa840">&#9670;&nbsp;</a></span>io_uring_submit_and_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int io_uring_submit_and_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>wait_nr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Submit sqes acquired from <a class="el" href="liburing_8h.html#aa2ce0e4b691ae0faf188a38974dd203c" title="Return an sqe to fill. ">io_uring_get_sqe()</a> to the kernel and wait for events. </p>
<p>Like <a class="el" href="liburing_8h.html#a556bbd9cfb46506458b32573a5326ad8" title="Submit sqes acquired from io_uring_get_sqe() to the kernel. ">io_uring_submit()</a>, but allows waiting for events as well.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ring</td><td>an <a class="el" href="structio__uring.html">io_uring</a> queue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wait_nr</td><td>number of completions to wait. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of sqes submitted on success, -errno on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00235">235</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="aea36874e3fdd54543cec58b68399920c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea36874e3fdd54543cec58b68399920c">&#9670;&nbsp;</a></span>io_uring_wait_cqe_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int io_uring_wait_cqe_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structio__uring__cqe.html">io_uring_cqe</a> **&#160;</td>
          <td class="paramname"><em>cqe_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct __kernel_timespec *&#160;</td>
          <td class="paramname"><em>ts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return an IO completion, waiting for it if necessary. </p>
<p>See <a class="el" href="liburing_8h.html#a7989e64f69bc3e9d85617b80ef527430" title="Return an IO completion, waiting for it if necessary. ">io_uring_wait_cqes()</a> - this function is the same, it just always uses '1' as the wait_nr. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ring</td><td>an <a class="el" href="structio__uring.html">io_uring</a> queue. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cqe_ptr</td><td>completion queue entries. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ts</td><td>timeout. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 with cqe_ptr filled in on success, -errno on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00182">182</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="a7989e64f69bc3e9d85617b80ef527430"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7989e64f69bc3e9d85617b80ef527430">&#9670;&nbsp;</a></span>io_uring_wait_cqes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int io_uring_wait_cqes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structio__uring__cqe.html">io_uring_cqe</a> **&#160;</td>
          <td class="paramname"><em>cqe_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>wait_nr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct __kernel_timespec *&#160;</td>
          <td class="paramname"><em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sigset_t *&#160;</td>
          <td class="paramname"><em>sigmask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return an IO completion, waiting for it if necessary. </p>
<p>Like <a class="el" href="liburing_8h.html#aa0f0333a8222c06ec2518bce538f2a4b" title="Return an IO completion, waiting for it if necessary. ">io_uring_wait_cqe()</a>, except it accepts a timeout value as well. Note that an sqe is used internally to handle the timeout. Applications using this function must never set sqe-&gt;user_data to LIBURING_UDATA_TIMEOUT!</p>
<p>If 'ts' is specified, the application need not call <a class="el" href="liburing_8h.html#a556bbd9cfb46506458b32573a5326ad8" title="Submit sqes acquired from io_uring_get_sqe() to the kernel. ">io_uring_submit()</a> before calling this function, as we will do that on its behalf. From this it also follows that this function isn't safe to use for applications that split SQ and CQ handling between two threads and expect that to work without synchronization, as this function manipulates both the SQ and CQ side.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ring</td><td>an <a class="el" href="structio__uring.html">io_uring</a> queue. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cqe_ptr</td><td>completion queue entries. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wait_nr</td><td>number of completions to wait. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ts</td><td>timeout. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sigmask</td><td>mask for signal set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 with cqe_ptr filled in on success, -errno on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00148">148</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="ad7c5570a084b8d796dac5373d3942d39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7c5570a084b8d796dac5373d3942d39">&#9670;&nbsp;</a></span>sq_ring_needs_enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool sq_ring_needs_enter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structio__uring.html">io_uring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>submitted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00022">22</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
